# 1. Create the missing configuration file
buildozer init

# 2. Configure the file automatically (Title, Package Name, etc.)
# These commands edit the 'buildozer.spec' file for you.

# Set App Title
sed -i 's/title = My Application/title = FamilyFinance/g' buildozer.spec

# Set Package Name
sed -i 's/package.name = myapp/package.name = familyfinance/g' buildozer.spec

# Set Domain
sed -i 's/package.domain = org.test/package.domain = org.family/g' buildozer.spec

# CRITICAL: Add Requirements (KivyMD, Internet support)
sed -i 's/requirements = python3,kivy/requirements = python3,kivy==2.2.1,kivymd,requests,urllib3,chardet,idna,openssl/g' buildozer.spec

# CRITICAL: Add Internet Permission (So app can talk to Google Sheets)
sed -i 's/android.permissions = INTERNET/android.permissions = INTERNET/g' buildozer.spec

# 3. Now you can build the APK
yes | buildozer android debug
